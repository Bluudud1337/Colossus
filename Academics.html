<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BrowSed</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #000;
        color: white;
        margin: 0;
        padding: 0;
    }
    .browser-container {
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        background-color: #111;
        border: 2px solid #8000ff;
        border-radius: 10px;
        overflow: hidden;
    }

    /* Tabs */
    .tabs-bar {
        display: flex;
        background-color: #000;
        padding: 5px;
        overflow-x: auto;
    }
    .tab {
        padding: 8px 15px;
        background-color: #222;
        color: white;
        margin-right: 5px;
        border-radius: 6px 6px 0 0;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        user-select: none;
    }
    .tab.active {
        background-color: #8000ff;
        font-weight: bold;
    }
    .tab button.close-tab {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-weight: bold;
    }

    /* Browser controls */
    .browser-bar {
        display: flex;
        padding: 10px;
        background-color: #000;
        align-items: center;
        gap: 5px;
    }
    .browser-bar input {
        flex: 1;
        padding: 8px 12px;
        border-radius: 6px;
        border: 2px solid #8000ff;
        background-color: #111;
        color: white;
        outline: none;
    }
    .browser-bar input::placeholder { color: #aaa; }
    .browser-bar button {
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        background-color: #3d0078;
        color: white;
        cursor: pointer;
        font-weight: bold;
    }
    .browser-bar button:hover { background-color: #5a00e7; }
    iframe { flex: 1; width: 100%; border: none; }
</style>
</head>
<body>

<div class="browser-container">
    <!-- Tabs -->
    <div class="tabs-bar" id="tabsBar"></div>

    <!-- Browser controls -->
    <div class="browser-bar">
        <button id="backBtn">‚¨ÖÔ∏è</button>
        <button id="forwardBtn">‚û°Ô∏è</button>
        <button id="reloadBtn">üîÑ</button>
        <input type="text" id="urlInput" placeholder="Enter URL..." onkeydown="if(event.key==='Enter'){loadURL();}">
        <button id="goBtn">Go</button>
        <button id="newTabBtn">‚ûï New Tab</button>
    </div>

    <!-- Iframe container -->
    <iframe id="browserFrame" src=""></iframe>
</div>

<script>
// ===================== Tab & History Management =====================
let tabs = [];
let currentTabIndex = 0;

// Add first tab: DuckDuckGo
addTab("https://duckduckgo.com");

// Add a new tab
function addTab(initialURL = "https://duckduckgo.com") {
    const newTab = {
        url: initialURL,
        history: [initialURL],
        currentIndex: 0
    };
    tabs.push(newTab);
    currentTabIndex = tabs.length - 1;
    renderTabs();
    loadCurrentTab();
}

// Close a tab
function closeTab(index) {
    if (tabs.length === 1) return; // always keep at least one tab
    tabs.splice(index, 1);
    if (currentTabIndex >= tabs.length) currentTabIndex = tabs.length - 1;
    renderTabs();
    loadCurrentTab();
}

// Switch to a tab
function switchTab(index) {
    currentTabIndex = index;
    renderTabs();
    loadCurrentTab();
}

// Render tabs bar
function renderTabs() {
    const tabsBar = document.getElementById("tabsBar");
    tabsBar.innerHTML = "";
    tabs.forEach((tab, index) => {
        const tabElement = document.createElement("div");
        tabElement.className = "tab" + (index === currentTabIndex ? " active" : "");
        tabElement.innerHTML = `
            <span class="tab-title">${tab.url.replace(/^https?:\/\//, "")}</span>
            <button class="close-tab">x</button>
        `;
        // Switch tab
        tabElement.querySelector(".tab-title").addEventListener("click", () => switchTab(index));
        // Close tab
        tabElement.querySelector(".close-tab").addEventListener("click", (e) => {
            e.stopPropagation();
            closeTab(index);
        });
        tabsBar.appendChild(tabElement);
    });
}

// Load current tab in iframe
function loadCurrentTab() {
    const tab = tabs[currentTabIndex];
    const iframe = document.getElementById("browserFrame");
    const input = document.getElementById("urlInput");

    // Use proxy server to allow embedding
    const proxyUrl = `https://your-proxy-url.com/?url=${encodeURIComponent(tab.url)}`;
    iframe.src = proxyUrl;
    input.value = tab.url;
}

// ===================== Browser Controls =====================
function loadURL() {
    let url = document.getElementById("urlInput").value.trim();
    if (!url.startsWith("http")) url = "https://" + url;

    const tab = tabs[currentTabIndex];
    tab.url = url;
    tab.history = tab.history.slice(0, tab.currentIndex + 1);
    tab.history.push(url);
    tab.currentIndex++;
    loadCurrentTab();
}

function goBack() {
    const tab = tabs[currentTabIndex];
    if (tab.currentIndex > 0) {
        tab.currentIndex--;
        tab.url = tab.history[tab.currentIndex];
        loadCurrentTab();
    }
}

function goForward() {
    const tab = tabs[currentTabIndex];
    if (tab.currentIndex < tab.history.length - 1) {
        tab.currentIndex++;
        tab.url = tab.history[tab.currentIndex];
        loadCurrentTab();
    }
}

function reloadPage() {
    const tab = tabs[currentTabIndex];
    loadCurrentTab();
}

// ===================== Button Events =====================
document.getElementById("backBtn").addEventListener("click", goBack);
document.getElementById("forwardBtn").addEventListener("click", goForward);
document.getElementById("reloadBtn").addEventListener("click", reloadPage);
document.getElementById("goBtn").addEventListener("click", loadURL);
document.getElementById("newTabBtn").addEventListener("click", () => addTab("https://duckduckgo.com"));
</script>

</body>
</html>
